extends layout.pug

block styles
  link(rel='stylesheet' href='/assets/panel.css')
  link#presenti-injection(rel='stylesheet' href='/assets/panel-presenti.css')

block content
  div.jumbotron
    h1 Hi, #{user.userID}

  div.token-management
    h3 OAuth
    p You can link your account with any of the below platforms to seamlessly integrate presence data from it.
    div.oauth-section
      if config.discord
        a.oauth-item(href=`/api/oauth/discord${user.platforms.DISCORD ? '/unlink' : ''}`)
          img(src='/assets/img/discord.svg')
          | #{user.platforms.DISCORD ? 'Unlink from Discord' : 'Link with Discord'}
  
  div.token-management
    h3 Token Management
    p If you need to generate a new access token, press the button below to generate it. You can #[a(href='/changepw') change your password] at any time to invalidate your tokens.
    div.token-generator
      input#generate-token(type='button' value='Generate')
      pre#token-holder.token-preview

  div.token-management
    h3 Link Code
    p If you need to generate a link code, press the button below to generate it. These codes expire within a minute, so act fast! You can #[a(href='/changepw') change your password] at any time to invalidate a link code.
    div.token-generator
      input#generate-link-code(type='button' value='Generate')
      pre#link-code-holder.token-preview

  div.preview
    h3 Live Preview
    p Your presences will show up below
    iframe#preview-frame(src=`/renderer?scope=${user.userID}` frameborder="0")

block scripts
  script(src='https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.2.10/iframeResizer.min.js')
  script(src='/assets/panel.js')